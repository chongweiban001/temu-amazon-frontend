{% extends "layout.html" %}

{% block page_title %}抓取数据{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>配置抓取参数</h5>
            </div>
            <div class="card-body">
                <form method="post" action="/crawl">
                    <div class="mb-3">
                        <label for="channel" class="form-label">数据频道</label>
                        <select class="form-select" id="channel" name="channel">
                            <option value="best_sellers">Best Sellers (畅销榜)</option>
                            <option value="movers_shakers">Movers & Shakers (飙升榜)</option>
                            <option value="outlet">Outlet (折扣商品)</option>
                            <option value="warehouse">Warehouse Deals (仓库特价)</option>
                            <option value="all">All Channels (所有频道)</option>
                        </select>
                        <div class="form-text">选择要抓取的数据来源</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="category" class="form-label">商品类目</label>
                        <select class="form-select" id="category" name="category">
                            {% for category in categories %}
                            <option value="{{ category }}">{{ category }}</option>
                            {% endfor %}
                        </select>
                        <div class="form-text">选择要抓取的商品类目</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="region" class="form-label">地区</label>
                        <select class="form-select" id="region" name="region">
                            <option value="us">美国 (US)</option>
                            <option value="uk">英国 (UK)</option>
                            <option value="de">德国 (DE)</option>
                            <option value="jp">日本 (JP)</option>
                            <option value="ca">加拿大 (CA)</option>
                        </select>
                        <div class="form-text">选择亚马逊站点地区</div>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="use_proxy" name="use_proxy" checked>
                        <label class="form-check-label" for="use_proxy">使用代理</label>
                        <div class="form-text">使用代理IP以避免被封禁</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="max_workers" class="form-label">并发线程数</label>
                        <input type="number" class="form-control" id="max_workers" name="max_workers" value="5" min="1" max="20">
                        <div class="form-text">并发抓取的线程数，建议不超过10</div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-cloud-download"></i> 开始抓取
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header">
                <h5>频道说明</h5>
            </div>
            <div class="card-body">
                <div class="accordion" id="channelAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                    data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                Best Sellers (畅销榜)
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" 
                             data-bs-parent="#channelAccordion">
                            <div class="accordion-body">
                                <p>亚马逊畅销榜商品，包含各类目下最受欢迎的产品。</p>
                                <ul>
                                    <li>更新频率：每日</li>
                                    <li>抓取深度：三级子类目</li>
                                    <li>过滤条件：评分 ≥ 4.3</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                Movers & Shakers (飙升榜)
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" 
                             data-bs-parent="#channelAccordion">
                            <div class="accordion-body">
                                <p>销量增长最快的产品，代表当前市场热点。</p>
                                <ul>
                                    <li>更新频率：每小时</li>
                                    <li>抓取深度：TOP列表</li>
                                    <li>过滤条件：排名上升 > 100%</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Outlet (折扣商品)
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" 
                             data-bs-parent="#channelAccordion">
                            <div class="accordion-body">
                                <p>亚马逊官方折扣商品，通常有较大折扣力度。</p>
                                <ul>
                                    <li>更新频率：每周</li>
                                    <li>抓取深度：二级分类</li>
                                    <li>过滤条件：折扣 > 40%</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                    data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                Warehouse Deals (仓库特价)
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" 
                             data-bs-parent="#channelAccordion">
                            <div class="accordion-body">
                                <p>亚马逊仓库中的开箱或轻微瑕疵商品，价格通常很低。</p>
                                <ul>
                                    <li>更新频率：每周</li>
                                    <li>抓取深度：二级分类</li>
                                    <li>过滤条件：状态为 Like New/Renewed，重量 < 1磅</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5>高风险类目警告</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-danger">
                    <p><strong>以下类目商品将被自动过滤：</strong></p>
                    <ul>
                        <li>儿童类产品</li>
                        <li>医疗健康类产品</li>
                        <li>食品/药品类产品</li>
                        <li>需要FDA/CE认证的产品</li>
                        <li>特定电子设备</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 